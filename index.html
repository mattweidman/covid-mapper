<!-- Code based on: http://bl.ocks.org/TheMapSmith/bd3ef04e33483e671601c753856273cb -->
<!-- US Covid-19 data: https://usafacts.org/visualizations/coronavirus-covid-19-spread-map/ -->
<!-- World Covid-19 data: https://covid19.who.int/table -->
<!-- World population data: https://data.worldbank.org/indicator/SP.POP.TOTL -->

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
    <title>COVID-19 cases</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
	<script type="text/javascript" src="https://d3js.org/queue.v1.min.js"></script>
    <script type="text/javascript" src="https://d3js.org/topojson.v1.min.js"></script> 
    <script src="https://d3js.org/d3-geo.v1.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="src/ast.js"></script>
    <script src="src/parser.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
	<h1>COVID-19 Map Maker</h1>
    <div id="expressioncontainer">
        <h4>Make your own graph by entering an expression:</h4>
        <a href="#suggestions" id="jumpLink">Check out our suggested expressions</a>
        <input type="text" id="expressioninput" value="cases(day)"></input><br></br>
        <div id="parseroutput"></div>
    </div>
    <div id="mapoptionscontainer">
        <label for="mapoptions">Select map type:</label>
        <select name="mapoptions" id="mapoptions">
            <option value="worldcountries">World - countries</option>
            <option value="usacounties">USA - counties</option>
        </select>
    </div>
    <div id="mapcontainer"></div>
    <div id="slidecontainer">
        <h4 id="datetext">Date: </h4>
        <input type="range" class="slider" id="dateslider"></input>
    </div>
    <p>Sources: usafacts.org, covid19.who.int, data.worldbank.org</p>
    <script src="src/index.js"></script>
    <div id="suggestions">
        <h4>Suggested expressions:</h4>
    </div>
    <script>
        $.getJSON('../../clientresources.json', function(data) {
            var samples = data.samples;
            for (var key in samples) {
                var button = document.createElement("BUTTON");
                button.setAttribute("id", key + "button");
                button.setAttribute("class", "sample-buttons");
                button.setAttribute("content", samples[key]);
                button.textContent = key;
                console.log(button)
                button.addEventListener("click", function(e) {
                    var input = document.getElementById("expressioninput");
                    input.value = e.target.getAttribute("content");
                    var top = $('#expressioninput').position().top;
                    $(window).scrollTop( top );
                });
                var wrapper = document.getElementById("suggestions");
                wrapper.appendChild(button);
            }
        });
    </script>
</body>
</html>